<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Vòng quay may mắn</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      overflow: hidden;
    }
    #wheel-container {
      width: 90vw;
      max-width: 500px; /* giới hạn tối đa để không bị vỡ hình */
      aspect-ratio: 1 / 1; /* luôn giữ hình tròn */
      position: relative;
    }
    #wheel {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      border: 5px solid #333;
      transition: transform 4s ease-out;
    }
    #spin-btn {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 10px;
      background: #28a745;
      color: #fff;
      cursor: pointer;
    }
    #spin-btn:active {
      background: #218838;
    }
    #pointer {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0; 
      height: 0; 
      border-left: 15px solid transparent;
      border-right: 15px solid transparent;
      border-bottom: 30px solid red;
      transform: translate(-50%, -100%);
      z-index: 10;
    }
  </style>
</head>
<body>
  <div id="wheel-container">
    <div id="pointer"></div>
    <canvas id="wheel"></canvas>
  </div>
  <button id="spin-btn">Quay</button>

  <script>
    const wheelCanvas = document.getElementById('wheel');
    const ctx = wheelCanvas.getContext('2d');

    function resizeWheel() {
      const container = document.getElementById('wheel-container');
      const size = container.offsetWidth;
      wheelCanvas.width = size;
      wheelCanvas.height = size;
      drawWheel();
    }

    const segments = ['A', 'B', 'C', 'D', 'E', 'F'];
    const colors = ['#f44336','#e91e63','#9c27b0','#3f51b5','#03a9f4','#4caf50'];

    function drawWheel() {
      const size = wheelCanvas.width;
      const arc = 2 * Math.PI / segments.length;
      for(let i = 0; i < segments.length; i++){
        ctx.beginPath();
        ctx.fillStyle = colors[i];
        ctx.moveTo(size/2, size/2);
        ctx.arc(size/2, size/2, size/2, arc*i, arc*(i+1));
        ctx.lineTo(size/2, size/2);
        ctx.fill();
        // Vẽ text
        ctx.save();
        ctx.translate(size/2, size/2);
        ctx.rotate(arc * i + arc/2);
        ctx.textAlign = "right";
        ctx.fillStyle = "#fff";
        ctx.font = `${size/15}px Arial`;
        ctx.fillText(segments[i], size/2 - 10, 10);
        ctx.restore();
      }
    }

    let rotation = 0;
    document.getElementById('spin-btn').addEventListener('click', () => {
      const randomSpin = Math.floor(Math.random() * 360) + 1800; // quay ít nhất 5 vòng
      rotation += randomSpin;
      wheelCanvas.style.transform = `rotate(${rotation}deg)`;
    });

    window.addEventListener('resize', resizeWheel);
    resizeWheel();
  </script>
</body>
</html>
